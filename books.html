<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>Family Hub - Books</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    html, body {
      scroll-behavior: smooth;
      overflow-x: hidden;
    }
    body {
      font-family: 'Inter', sans-serif;
      background: #f8f9fa;
      min-height: 100vh;
      color: #2d3748;
    }
    .navbar {
      background: #2d3748;
      backdrop-filter: blur(20px);
      border-bottom: 1px solid rgba(255, 255, 255, 0.2);
      color: white;
      padding: 8px 0;
      position: fixed;
      top: 0;
      width: 100%;
      z-index: 1000;
      height: 48px;
    }
    .navbar.hidden { transform: translateY(-100%); }
    .navbar-content {
      max-width: 1200px;
      margin: 0 auto;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0 8px;
    }
    .navbar-brand {
      font-size: 1.6rem;
      font-weight: 800;
      color: white;
      display: flex;
      align-items: center;
      gap: 8px;
      letter-spacing: 0.05em;
      text-transform: uppercase;
    }
    .navbar-brand i {
      background: linear-gradient(135deg, #ff6b6b, #feca57);
      padding: 6px;
      border-radius: 10px;
      color: white;
    }
    .navbar-nav {
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .navbar a {
      color: white;
      text-decoration: none;
      font-weight: 600;
      font-size: 0.95rem;
      padding: 8px 12px;
      border-radius: 15px;
      transition: all 0.3s ease;
      border: 1px solid rgba(255, 255, 255, 0.1);
      letter-spacing: 0.03em;
      display: flex;
      align-items: center;
      gap: 8px;
      min-height: 44px;
    }
    .navbar a:hover {
      background: rgba(255, 255, 255, 0.2);
      transform: translateY(-2px);
      color: white;
    }
    .navbar a.active {
      background: rgba(255, 255, 255, 0.25);
      color: white;
    }
    .hamburger {
      display: none;
      font-size: 1.2rem;
      color: white;
      background: none;
      border: none;
      cursor: pointer;
      padding: 8px;
      z-index: 1002;
    }
    .search-container {
      position: relative;
      display: flex;
      align-items: center;
    }
    .search-input {
      padding: 8px 12px 8px 35px;
      border: 2px solid rgba(255, 255, 255, 0.3);
      border-radius: 15px;
      background: rgba(255, 255, 255, 0.15);
      color: white;
      font-size: 0.9rem;
      outline: none;
      width: 160px;
      transition: all 0.3s ease;
      font-weight: 500;
      min-height: 44px;
      box-sizing: border-box;
    }
    .search-input:focus {
      width: 200px;
      border-color: #667eea;
      background: rgba(255, 255, 255, 0.25);
    }
    .search-input::placeholder { color: rgba(255, 255, 255, 0.7); }
    .search-icon {
      position: absolute;
      left: 10px;
      top: 50%;
      transform: translateY(-50%);
      color: white;
      font-size: 0.9rem;
    }
    .logout-btn {
      background: linear-gradient(135deg, #ff6b6b, #ff8e8e);
      color: white;
      border: none;
      padding: 8px 18px;
      border-radius: 15px;
      cursor: pointer;
      font-weight: 600;
      font-size: 0.9rem;
      transition: all 0.3s ease;
      min-height: 44px;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .logout-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(255, 107, 107, 0.4);
    }
    .content {
      margin-top: 48px;
      width: 100%;
      padding: 0;
      overflow-x: hidden;
    }
    .container {
      max-width: 1200px;
      width: 100%;
      margin: 0 auto;
      padding: 20px 8px;
      overflow-x: hidden;
    }
    .page-header {
      text-align: center;
      margin-bottom: 40px;
      padding: 30px 0;
    }
    .page-title {
      font-size: 2.8rem;
      font-weight: 800;
      color: #2d3748;
      margin-bottom: 12px;
      letter-spacing: 0.02em;
    }
    .page-subtitle {
      font-size: 1.2rem;
      color: #718096;
      font-weight: 400;
      max-width: 600px;
      margin: 0 auto;
    }
    #posts-container {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 24px;
      margin-bottom: 80px;
      width: 100%;
    }
    .post {
      background: white;
      border: 2px solid transparent;
      border-radius: 12px;
      overflow: hidden;
      transition: all 0.3s ease;
      opacity: 0;
      transform: translateY(20px);
      animation: fadeInUp 0.5s ease forwards;
      display: flex;
      flex-direction: column;
    }
    .post:nth-child(1) { animation-delay: 0.1s; }
    .post:nth-child(2) { animation-delay: 0.2s; }
    .post:nth-child(3) { animation-delay: 0.3s; }
    @keyframes fadeInUp {
      to { opacity: 1; transform: translateY(0); }
    }
    .post:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
      border-image: linear-gradient(135deg, #667eea, #764ba2) 1;
    }
    .post-image-container {
      position: relative;
      overflow: hidden;
      max-height: 300px;
      background: #f7fafc;
    }
    .post-image {
      width: 100%;
      height: 100%;
      object-fit: contain;
      transition: transform 0.3s ease;
      max-height: 300px;
    }
    .post:hover .post-image { transform: scale(1.05); }
    .post-content-wrapper {
      padding: 24px;
      display: flex;
      flex-direction: column;
      gap: 20px;
      flex: 1;
    }
    .post-header {
      display: flex;
      align-items: center;
      gap: 15px;
    }
    .post-avatar {
      width: 48px;
      height: 48px;
      border-radius: 50%;
      background: linear-gradient(135deg, #667eea, #764ba2);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: 700;
      font-size: 18px;
    }
    .post-info h3 {
      font-size: 1.6rem;
      font-weight: 700;
      color: #2d3748;
      margin-bottom: 8px;
      letter-spacing: 0.02em;
    }
    .post-meta {
      color: #718096;
      font-size: 0.9rem;
      display: flex;
      align-items: center;
      gap: 15px;
      font-weight: 500;
    }
    .post-meta span {
      display: flex;
      align-items: center;
      gap: 6px;
    }
    .post-description {
      color: #4a5568;
      font-size: 1.1rem;
      line-height: 1.7;
      font-weight: 500;
      font-style: italic;
    }
    .post-content {
      color: #4a5568;
      font-size: 1rem;
      line-height: 1.8;
      white-space: pre-wrap;
    }
    .post-details {
      background: #f7fafc;
      padding: 15px;
      border-radius: 8px;
      border-left: 4px solid #667eea;
      font-size: 0.95rem;
      color: #4a5568;
      line-height: 1.6;
    }
    .post-details h4 {
      font-size: 1.1rem;
      font-weight: 700;
      color: #2d3748;
      margin-bottom: 10px;
    }
    .post-details ul {
      list-style: none;
      margin-top: 8px;
    }
    .post-details ul li {
      position: relative;
      padding-left: 20px;
      margin-bottom: 6px;
    }
    .post-details ul li:before {
      content: '•';
      position: absolute;
      left: 0;
      color: #667eea;
      font-size: 1.2rem;
    }
    .post-actions {
      display: flex;
      align-items: center;
      justify-content: flex-start;
      padding: 15px 0;
      border-top: 1px solid #e2e8f0;
      gap: 10px;
    }
    .download-btn {
      background: linear-gradient(135deg, #11998e, #38ef7d);
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 10px;
      cursor: pointer;
      font-weight: 600;
      font-size: 0.95rem;
      display: flex;
      align-items: center;
      gap: 8px;
      transition: all 0.3s ease;
      text-decoration: none;
      min-height: 44px;
    }
    .download-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(17, 153, 142, 0.4);
    }
    .empty-state {
      text-align: center;
      padding: 60px 20px;
      background: white;
      border-radius: 12px;
      border: 2px solid #e2e8f0;
      grid-column: 1 / -1;
    }
    .empty-state i {
      font-size: 3.5rem;
      color: #cbd5e0;
      margin-bottom: 15px;
    }
    .empty-state h3 {
      color: #2d3748;
      font-size: 1.5rem;
      margin-bottom: 10px;
      font-weight: 700;
    }
    .empty-state p {
      color: #718096;
      font-size: 1rem;
      font-weight: 500;
    }
    .footer {
      background: #000000;
      color: white;
      padding: 50px 0 20px;
      border-top: 3px solid #667eea;
      width: 100%;
      overflow-x: hidden;
    }
    .footer-content {
      max-width: 1200px;
      width: 100%;
      margin: 0 auto;
      padding: 0 8px;
      display: grid;
      grid-template-columns: 2fr 1fr 1fr 1fr;
      gap: 30px;
    }
    .footer-section h4 {
      font-size: 1.2rem;
      font-weight: 800;
      margin-bottom: 15px;
      color: #667eea;
      border-bottom: 2px solid #667eea;
      padding-bottom: 8px;
      letter-spacing: 0.03em;
    }
    .footer-section p {
      color: #cccccc;
      line-height: 1.5;
      margin-bottom: 12px;
      font-size: 0.9rem;
      font-weight: 500;
    }
    .footer-links {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    .footer-links a {
      color: #cccccc;
      text-decoration: none;
      transition: all 0.3s ease;
      padding: 4px 0;
      font-size: 0.9rem;
      font-weight: 500;
    }
    .footer-links a:hover {
      color: #667eea;
      transform: translateX(5px);
    }
    .social-links {
      display: flex;
      gap: 12px;
      margin-top: 15px;
    }
    .social-links a {
      width: 40px;
      height: 40px;
      background: #333333;
      border: 2px solid #667eea;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #667eea;
      transition: all 0.3s ease;
    }
    .social-links a:hover {
      background: #667eea;
      color: white;
      transform: translateY(-3px);
    }
    .footer-bottom {
      text-align: center;
      padding-top: 20px;
      margin-top: 30px;
      border-top: 1px solid #333333;
      color: #888888;
      font-size: 0.85rem;
      font-weight: 500;
    }
    .notification {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: linear-gradient(135deg, #11998e, #38ef7d);
      color: white;
      padding: 12px 20px;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
      opacity: 0;
      transform: translate(-50%, -50%) translateY(-20px);
      transition: opacity 0.3s ease, transform 0.3s ease;
      z-index: 10000;
      font-size: 0.9rem;
      font-weight: 600;
      text-align: center;
      max-width: 90%;
      word-wrap: break-word;
    }
    .notification.error {
      background: linear-gradient(135deg, #ff6b6b, #ff8e8e);
    }
    .notification.show {
      opacity: 1;
      transform: translate(-50%, -50%) translateY(0);
    }
    .loading {
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 20px;
      font-size: 1rem;
      font-weight: 600;
      color: #2d3748;
      width: 100%;
      grid-column: 1 / -1;
    }
    .loading::after {
      content: '';
      display: inline-block;
      width: 20px;
      height: 20px;
      border: 3px solid #667eea;
      border-top-color: transparent;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin-left: 10px;
    }
    @keyframes spin { to { transform: rotate(360deg); } }
    .back-to-top {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: linear-gradient(135deg, #667eea, #764ba2);
      color: white;
      border: none;
      border-radius: 50%;
      width: 44px;
      height: 44px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      opacity: 0;
      transition: opacity 0.3s ease, transform 0.3s ease;
      z-index: 1000;
    }
    .back-to-top.show {
      opacity: 1;
      transform: translateY(0);
    }
    .back-to-top:hover {
      transform: translateY(-3px);
      box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
    }
    @media (max-width: 768px) {
      #posts-container {
        grid-template-columns: 1fr;
        gap: 20px;
      }
      .navbar { padding: 8px 0; height: 48px; }
      .navbar-content { padding: 0 8px; width: 100%; }
      .navbar-brand { font-size: 1.4rem; }
      .hamburger { display: block; }
      .navbar-nav {
        display: none;
        position: fixed;
        top: 48px;
        right: 0;
        width: 80%;
        max-width: 300px;
        height: calc(100vh - 48px);
        background: #2d3748;
        flex-direction: column;
        padding: 20px;
        z-index: 1001;
        transform: translateX(100%);
        transition: transform 0.3s ease;
        overflow-y: auto;
      }
      .navbar-nav.active {
        display: flex;
        transform: translateX(0);
      }
      .navbar a {
        padding: 10px;
        font-size: 1rem;
        justify-content: flex-start;
        width: 100%;
        min-height: 44px;
      }
      .navbar a span { display: inline; }
      .logout-btn {
        padding: 10px;
        width: 100%;
        justify-content: flex-start;
      }
      .search-container {
        width: 100%;
        padding: 10px 0;
      }
      .search-input {
        width: 100%;
        padding-left: 35px;
        border: 2px solid #e2e8f0;
        background: white;
        color: #2d3748;
      }
      .search-input:focus {
        width: 100%;
        border-color: #667eea;
        box-shadow: 0 0 0 2px rgba(102, 126, 234, 0.1);
      }
      .search-icon { color: #2d3748; }
      .search-container.mobile-only {
        width: 100%;
        padding: 8px;
        position: fixed;
        top: 48px;
        left: 0;
        display: none;
        background: white;
        z-index: 999;
      }
      .search-container.mobile-only.active { display: flex; }
      .container { padding: 15px 8px; }
      .page-title { font-size: 2.2rem; }
      .page-subtitle { font-size: 1rem; }
      .post-image-container { max-height: 250px; }
      .post-image { max-height: 250px; object-fit: cover; }
      .post-content-wrapper { padding: 15px; }
      .post-avatar { width: 40px; height: 40px; font-size: 16px; }
      .post-info h3 { font-size: 1.4rem; }
      .post-meta { font-size: 0.85rem; gap: 10px; }
      .post-description { font-size: 1rem; }
      .post-content { font-size: 0.95rem; }
      .post-details { font-size: 0.9rem; }
      .post-details h4 { font-size: 1rem; }
      .post-actions { padding: 12px 0; }
      .download-btn { font-size: 0.9rem; padding: 8px 15px; }
      .footer-content { grid-template-columns: 1fr; gap: 20px; text-align: center; padding: 0 8px; }
      .social-links { justify-content: center; }
    }
    @media (max-width: 480px) {
      .navbar-brand { font-size: 1.2rem; }
      .page-title { font-size: 1.8rem; }
      .page-subtitle { font-size: 0.95rem; }
      .post-info h3 { font-size: 1.3rem; }
      .post-description { font-size: 0.95rem; }
      .post-content { font-size: 0.9rem; }
      .post-meta { font-size: 0.8rem; }
      .post-details { font-size: 0.85rem; }
      .post-details h4 { font-size: 0.95rem; }
      .download-btn { font-size: 0.85rem; }
    }
  </style>
</head>
<body>
  <nav class="navbar" role="navigation" aria-label="Main navigation">
    <div class="navbar-content">
      <div class="navbar-brand">
        <i class="fas fa-home"></i> Family Hub
      </div>
      <button class="hamburger" aria-label="Toggle menu"><i class="fas fa-bars"></i></button>
      <div class="navbar-nav">
        <a href="posts.html"><i class="fas fa-newspaper"></i><span>Posts</span></a>
        <a href="events.html"><i class="fas fa-calendar"></i><span>Events</span></a>
        <a href="recipes.html"><i class="fas fa-utensils"></i><span>Recipes</span></a>
        <a href="books.html" class="active"><i class="fas fa-book"></i><span>Books</span></a>
        <a href="blogs.html"><i class="fas fa-blog"></i><span>Blogs</span></a>
        <a href="add-post.html"><i class="fas fa-plus"></i><span>Add Post</span></a>
        <div class="search-container">
          <i class="fas fa-search search-icon"></i>
          <input type="text" class="search-input" placeholder="Search books..." id="search-input" aria-label="Search books">
        </div>
        <button id="logout" class="logout-btn">
          <i class="fas fa-sign-out-alt"></i><span>Logout</span>
        </button>
      </div>
    </div>
  </nav>
  <div class="content">
    <div class="search-container mobile-only">
      <i class="fas fa-search search-icon"></i>
      <input type="text" class="search-input" placeholder="Search books..." id="search-input-mobile" aria-label="Search books">
    </div>
    <div class="container">
      <div class="page-header">
        <h1 class="page-title">Family Books</h1>
        <p class="page-subtitle">Explore our curated collection of favorite family books to inspire and entertain.</p>
      </div>
      <div id="posts-container">
        <div class="loading">Loading books...</div>
      </div>
    </div>
  </div>
  <footer class="footer">
    <div class="footer-content">
      <div class="footer-section">
        <h4>Family Hub</h4>
        <p>Connecting families through shared moments, memories, and love. Your digital family home where every story matters and brings us closer together.</p>
        <div class="social-links">
          <a href="#" title="Facebook" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
          <a href="#" title="Twitter" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
          <a href="#" title="Instagram" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
          <a href="#" title="YouTube" aria-label="YouTube"><i class="fab fa-youtube"></i></a>
        </div>
      </div>
      <div class="footer-section">
        <h4>Quick Links</h4>
        <div class="footer-links">
          <a href="posts.html">Family Posts</a>
          <a href="events.html">Events & Celebrations</a>
          <a href="recipes.html">Family Recipes</a>
          <a href="books.html">Reading Corner</a>
          <a href="blogs.html">Family Blogs</a>
          <a href="add-post.html">Add New Post</a>
        </div>
      </div>
      <div class="footer-section">
        <h4>Support</h4>
        <div class="footer-links">
          <a href="#">Help Center</a>
          <a href="#">Privacy Policy</a>
          <a href="#">Terms of Service</a>
          <a href="#">Contact Us</a>
          <a href="#">Community Guidelines</a>
          <a href="#">FAQ</a>
        </div>
      </div>
      <div class="footer-section">
        <h4>Stay Connected</h4>
        <p>Get the latest updates about your family's activities and never miss a special moment.</p>
        <p style="margin-top: 12px; color: #667eea;"><i class="fas fa-heart"></i> Made with love for families everywhere</p>
      </div>
    </div>
    <div class="footer-bottom">
      <p>© 2025 Family Hub. All rights reserved by tales. Built with ❤️ for bringing families closer together.</p>
    </div>
  </footer>
  <button class="back-to-top" id="back-to-top" aria-label="Back to top"><i class="fas fa-chevron-up"></i></button>
  <script>
    // Static book data
    const booksData = [
      {
        id: 'book1',
        posterName: 'JANSEN & GLORIA TROTMAN',
        title: 'THE POWER OF EFFECTIVE PRAYER',
        description: 'A practical and inspiring guide to transforming your prayer life—blending rich spiritual insight with actionable techniques.',
        content: `Jansen and Gloria Trotman explore the richness of a dynamic prayer life. Covering the power and privilege of prayer, the role of the Holy Spirit, Jesus’s example, how to understand God’s answers, and how to develop consistent, effective prayer habits.`,
        imageLink: 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR2R4ypuILrBT8SzSTF6JT0ilGUeUsaKGbHuA&s',
        downloadLink: 'https://drive.google.com/file/d/19fL97PSAsbhGPBo_bPopPpm3b_6LW0V6/view?usp=drive_link',
        timestamp: 1626451200000,
        details: {
          authors: ['Jansen Trotman, MA', 'Gloria Trotman, PhD'],
          pages: 144,
          binding: 'Paperback',
          dimensions: '16 × 23 cm',
          publisher: 'Inter‑American Division Press',
          keyTopics: [
            'Power & privilege of prayer',
            'Holy Spirit’s role',
            'Biblical examples (Jesus, Psalms)',
            'Understanding God’s responses',
            'Building vibrant prayer habits'
          ]
        }
      },
      {
        id: 'book2',
        posterName: 'Jane Smith',
        title: 'CALL TO SERVE',
        description: 'A dystopian tale of surveillance and control.',
        content: 'George Orwell\'s novel depicts a totalitarian society where Big Brother watches every move...',
        imageLink: 'https://images.squarespace-cdn.com/content/v1/596f83e15016e1bccacb22eb/1550686582701-BR7PM3VW7NK6VED3C57E/Called+to+Serve.png',
        downloadLink: 'https://drive.google.com/file/d/16sxLWGzOJKI-pGpuK30of3VtOWtdefDs/view?usp=drive_link',
        timestamp: 1626451100000,
        details: {
          authors: ['George Orwell'],
          pages: 328,
          binding: 'Hardcover',
          dimensions: '13 × 20 cm',
          publisher: 'Secker & Warburg',
          keyTopics: [
            'Totalitarianism',
            'Surveillance',
            'Individual freedom',
            'Propaganda'
          ]
        }
      },
      {
        id: 'book3',
        posterName: 'Emily Johnson',
        title: 'PRIDE AND PREJUDICE',
        description: 'A romantic novel about love and social class.',
        content: 'Jane Austen\'s witty novel follows Elizabeth Bennet as she navigates societal expectations...',
        imageLink: 'https://greenvillejournal.com/wp-content/uploads/2024/12/books-iStock-1481862788-edited.jpg',
        downloadLink: 'https://example.com/pride-and-prejudice.pdf',
        timestamp: 1626451000000,
        details: {
          authors: ['Jane Austen'],
          pages: 432,
          binding: 'Paperback',
          dimensions: '13 × 20 cm',
          publisher: 'T. Egerton',
          keyTopics: [
            'Love and marriage',
            'Social class',
            'Family dynamics',
            'Personal growth'
          ]
        }
      }
    ];

    document.addEventListener('DOMContentLoaded', () => {
      const postsContainer = document.getElementById('posts-container');
      const searchInput = document.getElementById('search-input');
      const searchInputMobile = document.getElementById('search-input-mobile');
      const backToTopBtn = document.getElementById('back-to-top');
      const logoutBtn = document.getElementById('logout');
      const hamburger = document.querySelector('.hamburger');
      const navbarNav = document.querySelector('.navbar-nav');
      const navbar = document.querySelector('.navbar');
      const searchContainerMobile = document.querySelector('.search-container.mobile-only');
      let lastScrollY = 0;

      if (logoutBtn) {
        logoutBtn.addEventListener('click', () => {
          showNotification('Logged out successfully.');
          setTimeout(() => window.location.href = 'index.html', 1000);
        });
      }

      if (hamburger && navbarNav) {
        hamburger.addEventListener('click', (e) => {
          e.stopPropagation();
          navbarNav.classList.toggle('active');
          hamburger.innerHTML = navbarNav.classList.contains('active') ?
            `<i class="fas fa-times"></i>` : `<i class="fas fa-bars"></i>`;
          hamburger.setAttribute('aria-label', navbarNav.classList.contains('active') ? 'Close menu' : 'Open menu');
          searchContainerMobile.classList.toggle('active', !navbarNav.classList.contains('active'));
        });
      }

      window.addEventListener('scroll', () => {
        const currentScrollY = window.scrollY;
        const isMobile = window.innerWidth <= 768;
        if (currentScrollY > lastScrollY && currentScrollY > 50 && !navbarNav.classList.contains('active')) {
          navbar.classList.add('hidden');
          if (isMobile) searchContainerMobile.classList.remove('active');
        } else if (currentScrollY < lastScrollY || currentScrollY <= 0) {
          navbar.classList.remove('hidden');
          if (isMobile) searchContainerMobile.classList.add('active');
        }
        backToTopBtn.classList.toggle('show', currentScrollY > 300);
        lastScrollY = currentScrollY;
      });

      if (backToTopBtn) {
        backToTopBtn.addEventListener('click', () => {
          window.scrollTo({ top: 0, behavior: 'smooth' });
        });
      }

      document.addEventListener('click', (e) => {
        if (!e.target.closest('.navbar-nav') && !e.target.closest('.hamburger') && navbarNav) {
          navbarNav.classList.remove('active');
          hamburger.innerHTML = `<i class="fas fa-bars"></i>`;
          hamburger.setAttribute('aria-label', 'Open menu');
          if (window.innerWidth <= 768) searchContainerMobile.classList.add('active');
        }
      });

      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape' && navbarNav) {
          navbarNav.classList.remove('active');
          hamburger.innerHTML = `<i class="fas fa-bars"></i>`;
          hamburger.setAttribute('aria-label', 'Open menu');
          if (window.innerWidth <= 768) searchContainerMobile.classList.add('active');
        }
      });

      if (searchInput) {
        searchInput.addEventListener('input', () => {
          renderBooks(booksData);
          if (searchInputMobile) searchInputMobile.value = searchInput.value;
        });
      }
      if (searchInputMobile) {
        searchInputMobile.addEventListener('input', () => {
          renderBooks(booksData);
          if (searchInput) searchInput.value = searchInputMobile.value;
        });
      }

      function getUserInitials(name) {
        if (!name) return '?';
        return name.split(' ').map(n => n[0]).join('').toUpperCase().slice(0, 2);
      }

      function timeAgo(timestamp) {
        if (!timestamp) return 'Unknown time';
        const now = Date.now();
        const diff = now - timestamp;
        const minutes = Math.floor(diff / 60000);
        const hours = Math.floor(diff / 3600000);
        const days = Math.floor(diff / 86400000);
        return minutes < 1 ? 'Just now' : minutes < 60 ? `${minutes}m ago` :
               hours < 24 ? `${hours}h ago` : days < 7 ? `${days}d ago` :
               new Date(timestamp).toLocaleDateString();
      }

      function showNotification(message, isError = false) {
        const notification = document.createElement('div');
        notification.className = `notification ${isError ? 'error' : ''}`;
        notification.textContent = message;
        document.body.appendChild(notification);
        setTimeout(() => notification.classList.add('show'), 100);
        setTimeout(() => {
          notification.classList.remove('show');
          setTimeout(() => notification.remove(), 300);
        }, 3000);
      }

      function renderBooks(books) {
        postsContainer.innerHTML = '';
        const searchQuery = (searchInput?.value || searchInputMobile?.value || '').toLowerCase();
        const filteredBooks = books.filter(book =>
          !searchQuery ||
          book.title?.toLowerCase().includes(searchQuery) ||
          (book.description && book.description.toLowerCase().includes(searchQuery)) ||
          (book.content && book.content.toLowerCase().includes(searchQuery)) ||
          (book.details?.authors && book.details.authors.join(' ').toLowerCase().includes(searchQuery)) ||
          (book.details?.publisher && book.details.publisher.toLowerCase().includes(searchQuery)) ||
          (book.details?.keyTopics && book.details.keyTopics.join(' ').toLowerCase().includes(searchQuery))
        ).sort((a, b) => (b.timestamp || 0) - (a.timestamp || 0));

        if (filteredBooks.length === 0) {
          postsContainer.innerHTML = `
            <div class="empty-state">
              <i class="fas fa-search"></i>
              <h3>No books found</h3>
              <p>Try a different search term!</p>
            </div>`;
          return;
        }

        filteredBooks.forEach((book, index) => {
          const userInitials = getUserInitials(book.posterName);
          const detailsHtml = book.details ? `
            <div class="post-details">
              <h4>Book Details</h4>
              <p><strong>Authors:</strong> ${book.details.authors ? book.details.authors.join(', ') : 'Unknown'}</p>
              <p><strong>Pages:</strong> ${book.details.pages || 'N/A'}</p>
              <p><strong>Binding:</strong> ${book.details.binding || 'N/A'}</p>
              <p><strong>Dimensions:</strong> ${book.details.dimensions || 'N/A'}</p>
              <p><strong>Publisher:</strong> ${book.details.publisher || 'N/A'}</p>
              ${book.details.keyTopics ? `
                <h4>Key Topics</h4>
                <ul>
                  ${book.details.keyTopics.map(topic => `<li>${topic}</li>`).join('')}
                </ul>
              ` : ''}
            </div>
          ` : '';

          const postElement = document.createElement('div');
          postElement.className = 'post';
          postElement.style.animationDelay = `${index * 0.1}s`;
          postElement.innerHTML = `
            <div class="post-image-container">
              <img src="${book.imageLink || 'https://via.placeholder.com/300'}" alt="${book.title || 'Image'}" class="post-image" onerror="this.src='https://via.placeholder.com/300';">
            </div>
            <div class="post-content-wrapper">
              <div class="post-header">
                <div class="post-avatar">${userInitials}</div>
                <div class="post-info">
                  <h3>${book.title || 'Untitled'}</h3>
                  <div class="post-meta">
                    <span><i class="fas fa-user"></i> ${book.posterName || 'Anonymous'}</span>
                    <span><i class="fas fa-clock"></i> ${timeAgo(book.timestamp)}</span>
                  </div>
                </div>
              </div>
              ${book.description ? `<div class="post-description">${book.description}</div>` : ''}
              ${book.content ? `<div class="post-content">${book.content}</div>` : ''}
              ${detailsHtml}
              <div class="post-actions">
                <a href="${book.downloadLink || '#'}" class="download-btn" target="_blank">
                  <i class="fas fa-download"></i> Download Book
                </a>
              </div>
            </div>
          `;
          postsContainer.appendChild(postElement);
        });
      }

      // Image modal functionality
      document.addEventListener('click', (e) => {
        if (e.target.classList.contains('post-image')) {
          const modal = document.createElement('div');
          modal.style.cssText = `
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10000;
            cursor: pointer;
          `;
          const img = document.createElement('img');
          img.src = e.target.src;
          img.style.cssText = `
            max-width: 85%;
            max-height: 85%;
            border-radius: 12px;
            object-fit: contain;
          `;
          modal.appendChild(img);
          document.body.appendChild(modal);
          modal.addEventListener('click', () => document.body.removeChild(modal));
        }
      });

      // Simulate loading
      setTimeout(() => {
        renderBooks(booksData);
      }, 1000);
    });
  </script>
</body>
</html>